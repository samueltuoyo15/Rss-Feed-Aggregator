{{ define "feed-items" }}
{{ range $source, $items := . }}
    {{ range $items }}
        <article class="w-full p-4 bg-white rounded-lg border border-gray-200 hover:shadow-md transition-shadow">
            {{ if .ThumbnailUrl }}
            <div class="mb-3">
                <img src="{{ .ThumbnailUrl }}" alt="{{ .Title }}" 
                     class="w-full h-48 object-cover rounded-lg">
            </div>
            {{ end }}
            
            <div class="flex items-center gap-2 mb-2">
                {{ if .Categories }}
                <span class="px-2 py-1 text-xs font-medium rounded-full bg-amber-100 text-amber-800">
                    {{ index .Categories 0 }}
                </span>
                {{ end }}
                <time class="text-xs italic text-gray-400">
                    {{ if .PublishedAt }}
                        {{ formatDate .PublishedAt }}
                    {{ else }}
                        Unknown date
                    {{ end }}
                </time>
                <span class="text-xs text-gray-500 ml-auto">{{ $source }}</span>
            </div>
            
            <h2 class="text-lg font-bold text-gray-900">
                <a href="{{ .Link }}" target="_blank" rel="noopener noreferrer">{{ .Title }}</a>
            </h2>
            
            <p class="mt-1 text-gray-600 line-clamp-2">
                {{ if .Description }}
                    {{ .Description }}
                {{ else if .Content }}
                    {{ truncate .Content 150 }}
                {{ end }}
            </p>
            </div>
        </article>
    {{ end }}
{{ end }}
{{ end }}
